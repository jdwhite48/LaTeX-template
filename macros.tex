%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%   Created By:     Jacob White
%   Email:          white570@purdue.edu
%   Last Updated:   27 August 2021
%
%   Sources of inspiration:
%       - Christina Garman's Practical & Applied Cryptography midterm template
%       - Reed Oei's math homework template (https://github.com/ReedOei/LaTeX)
%       - K A Gillow's University of Oxford, Mathematical Institute LaTeX Problem Sheet (https://www.maths.ox.ac.uk/members/it/faqs/latex/problem-sheets)
%       - Sources for specific commands may be referenced inline.
%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{amsthm}
\usepackage{footnote}
\usepackage{enumitem}

\usepackage{ifthen}
\usepackage{xifthen}
\usepackage{calc}

\usepackage{xspace}

%%% Change hyperref's colors
\hypersetup{            
  colorlinks=true,
  linkcolor=black,   % internal links (e.g. equation and theorem labels)
  urlcolor=cyan,     % \hyperref and \url
  filecolor=red,
  citecolor=black,
}

%%% Author notes
%\newcommand{\jw}[1]{\dtcolornote[JW]{cyan}{#1}}

%%% Change color of footnote links to black
\renewcommand{\thefootnote}{\textcolor{black}{\arabic{footnote}}}

%%% From: https://en.wikibooks.org/wiki/LaTeX/Source_Code_Listings#Automating_file_inclusion
\newcommand{\includecode}[2][c]{\lstinputlisting[language=#1, caption=#2, basicstyle=\normalsize\ttfamily]{#2}}

%%% Better paragraph indents
%\setlength{\parskip}{0em}       % parskip import does this already -- adds spacing after paragraph "by about the length of a lowercase 'x'"
\AtBeginDocument{\setlength{\parindent}{15pt}}     % Re-enable \parindent as default (equiv. spacing for 11pt) even if parskip imported

%%%%%%%%%%%%%%%%%%%
% Math macros     %
%%%%%%%%%%%%%%%%%%%

%%% General Arithmetic
\newcommand     {\nthroot}[2]{\ensuremath{\sqrt[\leftroot{-1}\uproot{1}\scriptstyle #1]{#2}}}
\newcommand     {\abs}[1]{\ensuremath{\left| #1 \right|}}
\newcommand     {\inverse}[1]{\ensuremath{\frac{1}{#1}}\xspace}
\newcommand     {\half}{\inverse{2}}
\newcommand     {\third}{\inverse{3}}
\newcommand     {\fourth}{\inverse{4}}
%%% Groups, Fields, and Rings
\newcommand     {\group}{\ensuremath{\mathbb{G}}\xspace}
\newcommand     {\G}{\group}
\newcommand     {\nat}{\ensuremath{\mathbb{N}}\xspace}
\newcommand     {\naturals}{\nat}
\newcommand     {\N}{\nat}
\newcommand     {\ints}{\ensuremath{\mathbb{Z}}\xspace}
\newcommand     {\integers}{\int}
\newcommand     {\Z}{\int}
\newcommand     {\Zmod}[1]{\ensuremath{\Z_{#1}}\xspace}
\newcommand     {\rat}{\ensuremath{\mathbb{Q}}\xspace}
\newcommand     {\rationals}{\rat}
\newcommand     {\Q}{\rat}
\newcommand     {\real}{\ensuremath{\mathbb{R}}\xspace}
\newcommand     {\reals}{\real}
\newcommand     {\R}{\real}
\newcommand     {\complex}{\ensuremath{\mathbb{C}}\xspace}
\newcommand     {\C}{\complex}
\newcommand     {\field}{\ensuremath{\mathbb{F}}\xspace}
\newcommand     {\F}{\field}
\newcommand     {\ring}{\ensuremath{\mathcal{R}}\xspace}
\newcommand     {\rng}{\ring}
\newcommand     {\inftypt}{\ensuremath{\mathcal{O}}\xspace}
%%% Set notation
\newcommand     {\powerset}[1]{\ensuremath{\mathcal{P}(#1)}\xspace}
\newcommand     {\set}[1]{\ensuremath{\left\{ #1 \right\}}\xspace}
%%% Change to colon if you prefer that conditional notation over a vertical bar (\mid)
%\newcommand {\suchthat}{\xspace:\xspace}
\newcommand     {\suchthat}{\xspace\mid\xspace}
\newcommand     {\given}{\suchthat}
%%% Prevents overloading strikethrough macro if the document imports soul package
\ifdefined\st\else\newcommand{\st}{\suchthat}\fi
\newcommand     {\cset}[2]{\set{#1 \suchthat #2}}  % a conditional notation to define sets
\newcommand     {\lset}[2]{\set{#1,\ldots,#2}} % set {from,...,to}
\renewcommand   {\complement}[1]{\ensuremath{\overline{#1}}}
\newcommand     {\setcomplement}[2]{\ensuremath{#1\setminus{#2}}}
\newcommand     {\minuscomplement}[2]{\ensuremath{#1-#2}}
%%% Logic
%\renewcommand   {\implies}{ \longrightarrow }
%%% Custom functions
\renewcommand   {\max}[1]{\ensuremath{\text{{\upshape{max}}}\{#1\}}\xspace}
\renewcommand   {\min}[1]{\ensuremath{\text{{\upshape{min}}}\{#1\}}\xspace}
%%% Custom operators
\newcommand     {\bigcdot}{\ensuremath{\bullet}\xspace}
%%% Custom equivalence Relations
\renewcommand   {\approx}{\raise.17ex\hbox{\ensuremath{\scriptstyle\sim}}}
\renewcommand   {\gets}{\coloneqq}
%%% Relations-checking operators
\newcommand     {\iseq}{\overset{?}{=}}
\newcommand     {\isequiv}{\overset{?}{\equiv}}
\newcommand     {\iscong}{\overset{?}{\cong}}
\newcommand     {\isapprox}{\overset{?}{\approx}}
\newcommand     {\issim}{\overset{?}{\isapprox}}
\newcommand     {\issimeq}{\overset{?}{\simeq}}
\newcommand     {\isdoteq}{\overset{?}{\doteq}}
\newcommand     {\islt}{\overset{?}{<}}
\newcommand     {\isgt}{\overset{?}{>}}
\newcommand     {\isleq}{\overset{?}{\leq}}
\newcommand     {\isgeq}{\overset{?}{\geq}}
\newcommand     {\issubset}{\overset{?}{\subset}}
\newcommand     {\issupset}{\overset{?}{\supset}}
\newcommand     {\issubsetq}{\overset{?}{\subseteq}}
\newcommand     {\issupsetq}{\overset{?}{\supseteq}}
\newcommand     {\isprec}{\overset{?}{\prec}}
\newcommand     {\ispreceq}{\overset{?}{\preceq}}
\newcommand     {\issucc}{\overset{?}{\succ}}
\newcommand     {\issucceq}{\overset{?}{\succeq}}
\newcommand     {\ispropto}{\overset{?}{\propto}}
%%% Statistics
\renewcommand   {\Pr}[1]{\ensuremath{\mbox{Pr}\left[#1\right]}}
%%% Calculus
\newcommand     {\approaches}{\rightarrow}

%%%%%%%%%%%%%%%%%%%
% CS Macros       %
%%%%%%%%%%%%%%%%%%%
%%% General
\newcommand     {\alg}[1]{\ensuremath{\mathsf{#1}}\xspace}
\newcommand     {\var}[1]{\ensuremath{\mathsf{#1}}\xspace}
\newcommand     {\true}{\var{T}}
\newcommand     {\false}{\var{F}}
\newcommand     {\boolset}{\set{\true,\false}}
\newcommand     {\bitset}{\ensuremath{\set{0,1}*}\xspace}
%%% Reducibility
\newcommand     {\mapreducesto}{\leq_m}
\newcommand     {\mapreducesfrom}{\geq_m}
\newcommand     {\polyreducesto}{\leq_p}
\newcommand     {\polyreducesfrom}{\geq_p}
%%% Turing Machines
\newcommand     {\yields}{\rightarrow_M}
\newcommand     {\yieldsto}[1][*]{\overset{#1}{\rightarrow}_M}
\newcommand     {\blanksymbol}{%
  \ooalign{%
    \relax\cr%
    \noalign{\vskip.2ex}%
    \textvisiblespace\cr%
    \noalign{\vskip-.2ex}%
    \hphantom{~}\cr%   Width of a space character
    \vphantom{Xg}\cr%  Height of X, depth of g
  }\xspace%
}
%%% Grammars + Languages + Strings
\newcommand   {\derives}{\rightarrow}
\newcommand   {\derivesto}[1][*]{\overset{#1}{\rightarrow}}
%%% From: https://tex.stackexchange.com/questions/41357/replace-cmtt10-char32-visible-cup-space-with-something-more-gentle/41445#41445
\newcommand   {\emptystring}{\ensuremath{\epsilon}\xspace}
\newcommand   {\emptysymbol}{\emptystring}
\newcommand   {\langconcat}[2]{#1 \circ #2}
\newcommand   {\kleenestar}[1]{{#1}^*}
%%% Change to comma if you prefer that string concatenation over 2 vertical bars
%\newcommand  {\strconcat}{\xspace\ensuremath{,}\xspace}
\newcommand   {\strconcat}{\xspace\ensuremath{\Vert}\xspace}
\newcommand   {\concat}{\strconcat}
%%% Graphs
\newcommand   {\pathto}{\rightsquigarrow}
\newcommand   {\dirpath}{\pathto}
\newcommand   {\dirpathto}{\pathto}
\newcommand   {\undirpath}{\leftrightsquigarrow}
\newcommand   {\undirpathto}{\undirpath}
\newcommand   {\undirpathfrom}{\undirpath}
%%% Cryptography
\newcommand   {\secparam}{\ensuremath{\lambda}\xspace}
\newcommand   {\crs}{\var{crs}}
\newcommand   {\rel}[1]{\ensuremath{R_{\mathsf{#1}}}\xspace}
\newcommand   {\com}{\var{com}}


%%%%%%%%%%%%%%%%%%%
% Theorems etc.   %
%%%%%%%%%%%%%%%%%%%
\newcounter{problem}
\renewcommand{\theproblem}{\arabic{problem}}    
\newenvironment{problem}[1][] { % Optionally include descriptor and make following text italics by default
    \stepcounter{problem} \noindent \underline{\textbf{Problem \theproblem}}:
    \ifx\newenvironment#1\newenvironment\else\space(#1)\fi \space\itshape 
} {\vspace{1em}}

\newenvironment{solution} {\par} {\newpage}
%\renewenvironment{proof} {\vspace{0.5em} \noindent \underline{\textbf{Pf}}:} {\hfill \qedsymbol \vspace{0.5em}}      % Default proof, but with _*Pf:*_ instead
\newenvironment{theoremproof} {\vspace{0.5em} \noindent \textit{Proof \thetheorem.}} {\hfill \qedsymbol \vspace{0.5em}}      % Default proof, numbered by theorem
\newenvironment{corollaryproof} {\vspace{0.5em} \noindent \textit{Proof \thecorollary.}} {\hfill \qedsymbol \vspace{0.5em}}      % Default proof, numbered by corollary
\newenvironment{lemmaproof} {\vspace{0.5em} \noindent \textit{Proof \thelemma.}} {\hfill \qedsymbol \vspace{0.5em}}      % Default proof, numbered by lemma
\newenvironment{proofsketch} {\vspace{0.5em} \noindent \textit{Proof (Sketch).}} {\vspace{0.5em}}      % Default proof, but as an informal description

\ifdefined\definition\else\newtheorem{definition}{Definition}\fi
\newtheorem*{definition*}{Definition}
\ifdefined\theorem\else\newtheorem{theorem}{Theorem}[problem]\fi
\newtheorem*{theorem*}{Theorem}
%%% TODO: How do I want to number assumptions? Is a separate counter sufficient?
\ifdefined\assumption\else\newtheorem{assumption}{Assumption}[problem]\fi
\newtheorem*{assumption*}{Assumption}
\ifdefined\corollary\else\newtheorem{corollary}{Corollary}[theorem]\fi
\newtheorem*{corollary*}{Corollary}
\ifdefined\lemma\else\newtheorem{lemma}{Lemma}[theorem]\fi
\newtheorem*{lemma*}{Lemma}
\ifdefined\claim\else\newtheorem{claim}{Claim}[problem]\fi
\newtheorem*{claim*}{Claim}
\ifdefined\observation\else\newtheorem*{observation}{Observation}\fi
\ifdefined\proposition\else\newtheorem*{proposition}{Proposition}\fi
\ifdefined\fact\else\newtheorem*{fact}{Fact}\fi
\ifdefined\remark\else\newtheorem*{remark}{Remark}\fi

%%%%%%%%%%%%%%%%%%%
% Text shortcuts  %
%%%%%%%%%%%%%%%%%%%
\renewcommand   {\th}{\textsuperscript{th}\xspace}
\newcommand     {\wrt}{\xspace{with respect to}\xspace}
\newcommand     {\Wrt}{\xspace{With respect to}\xspace}
%%% NOTE: \wlog is a logging command and can't be redefined
\newcommand     {\WLOG}{\xspace{without loss of generality}\xspace}
\newcommand     {\Wlog}{\xspace{Without loss of generality}\xspace}
\newcommand     {\str}[1]{\ifmmode{\mathstrut\text{#1}}\else\mbox{\strut#1}\fi}
\newcommand     {\TODO}[1]{\par \noindent \textbf{\underline{TODO:}}\space#1}
\newcommand     {\NOTE}[1]{\par \noindent \textbf{NOTE:}\space#1}
%%% Modifies enumerate* to use 1) 2) ...
\renewlist{enumerate}{enumerate}{1}
\setlist[enumerate]{label=\arabic*)}